<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zenith Weather - Minimal & Elegant</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Poppins (modern and clean) and Inter (for data) -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Base & Global Styling */
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(145deg, #F9FAFB, #F0F4F8); /* Very light, subtle gradient background */
            /* Removed flex centering and padding to allow background to fill */
            margin: 0;
            padding: 0; /* Remove padding from body */
            width: 100vw; /* Ensure body takes full viewport width */
            height: 100vh; /* Ensure body takes full viewport height */
            box-sizing: border-box;
            color: #334155; /* Dark slate text */
            overflow-x: hidden; /* Prevent horizontal scrolling */
            overflow-y: auto; /* Allow vertical scrolling for long content */
            position: relative; /* For background animations */
        }

        /* Animated Background Elements - Soft, organic shapes */
        .bg-blob-1, .bg-blob-2 {
            position: fixed; /* Use fixed to ensure they cover the whole viewport regardless of scroll */
            border-radius: 50%;
            filter: blur(150px); /* Increased blur for a softer, wider glow */
            opacity: 0.6; /* Slightly more opaque for better visibility */
            z-index: 0; /* Behind main content */
            /* Adjusted for full screen coverage without any margin */
            top: 0;
            left: 0;
            width: 100vw; /* Cover full viewport width */
            height: 100vh; /* Cover full viewport height */
        }
        .bg-blob-1 {
            background: linear-gradient(135deg, #A7D9D3, #D4EDE9); /* Soft blue-green gradient */
            animation: floatBlob 15s ease-in-out infinite alternate;
        }
        .bg-blob-2 {
            background: linear-gradient(135deg, #CDE7FE, #E0F2FE); /* Soft light blue gradient */
            animation: floatBlob 18s ease-in-out infinite alternate-reverse;
            /* Positioning for the second blob to be slightly offset for overlapping effect */
            transform: translate(20vw, 20vh); /* Move it from the top-left */
            opacity: 0.5; /* Make it slightly less opaque to differentiate */
        }

        /* Main Container - Clean, lifted appearance */
        .main-container {
            background-color: #FFFFFF; /* Pure white background */
            border-radius: 36px; /* Super rounded corners */
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.08); /* Deep, soft shadow */
            max-width: 90%; /* Expansive width */
            width: calc(100% - 48px); /* Adjust width to account for body padding */
            margin: 24px auto; /* Add margin to center it and provide 24px space on sides */
            padding: 48px; /* Generous padding inside */
            position: relative;
            z-index: 10; /* Above background blobs */
            display: grid;
            grid-template-columns: 1fr; /* Default single column for mobile */
            gap: 40px; /* Spacing between main sections */
            animation: fadeInScaleUp 0.9s ease-out forwards; /* Initial animation */
        }

        /* Titles and Headings */
        .app-title {
            font-family: 'Poppins', sans-serif;
            font-size: 44px; /* Large, elegant title */
            font-weight: 700;
            color: #1E293B; /* Darker for prominence */
            margin-bottom: 40px;
            text-align: center;
        }
        .section-heading {
            font-family: 'Poppins', sans-serif;
            font-size: 28px;
            font-weight: 600;
            color: #1E293B;
            margin-bottom: 24px;
            text-align: left; /* Align headings left */
        }

        /* Input & Button Styling - Minimalist & Interactive */
        input[type="text"], input[type="number"], select {
            background-color: #F8FAFC; /* Very light background for inputs */
            color: #475569; /* Muted text color */
            border: 1px solid #E2E8F0; /* Subtle border */
            border-radius: 18px; /* Softly rounded */
            padding: 16px 24px; /* Generous padding */
            font-size: 16px;
            font-family: 'Inter', sans-serif;
            font-weight: 400;
            outline: none;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.03); /* Subtle inner shadow */
            transition: all 0.25s ease-in-out;
        }
        input[type="text"]:focus, input[type="number"]:focus, select:focus {
            border-color: #5EEAD4; /* Accent color on focus */
            box-shadow: 0 0 0 4px rgba(94, 234, 212, 0.2); /* Soft glow */
            background-color: #FFFFFF;
        }

        .btn-elegant {
            background: linear-gradient(135deg, #2DD4BF, #5EEAD4); /* Blue-green accent gradient */
            color: white;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            cursor: pointer;
            border-radius: 18px;
            padding: 16px 32px;
            box-shadow: 0 12px 30px rgba(45, 212, 191, 0.3); /* Matching shadow */
            transition: all 0.3s cubic-bezier(0.2, 0.8, 0.2, 1); /* Smooth springy effect */
            text-transform: capitalize;
            letter-spacing: 0.02em;
            border: none;
            position: relative;
            overflow: hidden;
            font-size: 16px;
        }
        .btn-elegant:hover {
            background: linear-gradient(135deg, #5EEAD4, #2DD4BF);
            box-shadow: 0 16px 40px rgba(45, 212, 191, 0.4);
            transform: translateY(-4px) scale(1.01);
        }
        .btn-elegant:active {
            transform: translateY(0) scale(1);
            box-shadow: 0 4px 15px rgba(45, 212, 191, 0.2);
        }
        /* Subtle ripple for buttons */
        .btn-elegant::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            opacity: 0;
            transform: translate(-50%, -50%);
            transition: width 0.4s ease-out, height 0.4s ease-out, opacity 0.4s ease-out;
        }
        .btn-elegant:hover::after {
            width: 300px;
            height: 300px;
            opacity: 1;
        }

        /* Current Weather Section - Prominent and elegant */
        .current-weather-main {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
            background-color: #E0F2F7; /* Very light, calming blue background */
            border-radius: 32px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.06);
            position: relative;
            overflow: hidden;
            margin-bottom: 32px;
            animation: slideInBottom 1s ease-out;
        }
        .current-weather-main::before { /* Subtle background pattern */
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h16v16H0z' fill='none'/%3E%3Cpath d='M8 12.5L12.5 8 8 3.5 3.5 8 8 12.5z' fill='%23B2EBF2' fill-opacity='0.2'/%3E%3C/svg%3E") repeat;
            opacity: 0.8;
            z-index: 1;
        }
        .current-weather-main > * {
            position: relative;
            z-index: 2; /* Ensure content is above pattern */
        }

        .weather-icon-giant {
            width: 200px;
            height: 200px;
            margin-bottom: 16px;
            animation: fadeInBounce 1.2s ease-out;
        }
        .temperature-super-large {
            font-family: 'Poppins', sans-serif;
            font-size: 96px; /* Massive temperature */
            font-weight: 700;
            line-height: 0.9;
            color: #1E293B;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.05);
        }
        .city-country-large {
            font-family: 'Poppins', sans-serif;
            font-size: 40px;
            font-weight: 600;
            color: #334155;
            margin-top: 8px;
        }
        .description-large {
            font-size: 22px;
            font-weight: 500;
            color: #64748B;
            text-transform: capitalize;
            margin-top: 8px;
        }
        .current-time-small {
            font-family: 'Inter', sans-serif;
            font-size: 16px;
            color: #94A3B8;
            margin-top: 16px;
        }


        /* Highlight Cards - Clean and informative */
        .highlights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); /* Flexible columns */
            gap: 20px;
            margin-bottom: 40px;
        }
        .highlight-card-minimal {
            background-color: #FFFFFF;
            border-radius: 20px;
            padding: 24px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            border: 1px solid #E2E8F0;
            display: flex;
            flex-direction: column;
            align-items: flex-start; /* Align content to left */
            text-align: left;
        }
        .highlight-card-minimal:hover {
            transform: translateY(-6px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.08);
        }
        .highlight-card-minimal .highlight-icon {
            font-size: 32px; /* Prominent icons */
            color: #2DD4BF; /* Accent color for icons */
            margin-bottom: 12px;
        }
        .highlight-card-minimal .highlight-label {
            font-size: 15px;
            font-weight: 500;
            color: #64748B;
            margin-bottom: 6px;
        }
        .highlight-card-minimal .highlight-value-bold {
            font-family: 'Inter', sans-serif;
            font-size: 28px;
            font-weight: 600;
            color: #1E293B;
        }
        .highlight-card-minimal .highlight-status-text {
            font-size: 14px;
            color: #94A3B8;
            margin-top: 4px;
            display: flex;
            align-items: center;
        }
        .highlight-card-minimal .highlight-status-text i {
            margin-right: 6px;
            font-size: 16px;
        }

        /* Progress bars/sliders for highlights */
        .progress-bar-container {
            width: 100%;
            height: 8px;
            background-color: #E2E8F0;
            border-radius: 4px;
            margin-top: 12px;
            position: relative;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #2DD4BF, #5EEAD4); /* Default accent gradient */
            border-radius: 4px;
            width: var(--progress-width, 0%);
            transition: width 0.5s ease-out;
        }
        .progress-indicator {
            position: absolute;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 14px;
            height: 14px;
            background-color: white;
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            border: 2px solid #2DD4BF; /* Matching border */
            left: var(--indicator-left, 0%);
            transition: left 0.5s ease-out;
        }

        /* Specific highlight card color overrides */
        .uv-card .progress-fill { background: linear-gradient(90deg, #FACC15, #F59E0B); } /* Yellow-orange */
        .uv-card .progress-indicator { border-color: #F59E0B; }
        .wind-card .progress-fill { background: linear-gradient(90deg, #60A5FA, #3B82F6); } /* Blue */
        .wind-card .progress-indicator { border-color: #3B82F6; }
        .humidity-card .progress-fill { background: linear-gradient(90deg, #34D399, #10B981); } /* Green */
        .humidity-card .progress-indicator { border-color: #10B981; }
        .visibility-card .progress-fill { background: linear-gradient(90deg, #A78BFA, #8B5CF6); } /* Purple */
        .visibility-card .progress-indicator { border-color: #8B5CF6; }
        .air-quality-card .progress-fill { background: linear-gradient(90deg, #EF4444, #DC2626); } /* Red */
        .air-quality-card .progress-indicator { border-color: #DC2626; }

        /* Forecast Section - Clean, scrollable horizontal list */
        .forecast-carousel-wrapper {
            margin-bottom: 40px;
        }
        .forecast-carousel {
            display: flex;
            gap: 16px;
            overflow-x: auto; /* Horizontal scroll */
            padding-bottom: 12px; /* Space for scrollbar */
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: thin;
            scrollbar-color: #A7D9D3 #E0F2FE; /* Custom scrollbar color */
        }
        .forecast-carousel::-webkit-scrollbar { height: 8px; }
        .forecast-carousel::-webkit-scrollbar-track { background: #E0F2FE; border-radius: 10px; }
        .forecast-carousel::-webkit-scrollbar-thumb { background: #A7D9D3; border-radius: 10px; border: 2px solid #E0F2FE; }
        .forecast-carousel::-webkit-scrollbar-thumb:hover { background: #8FD8D0; }

        .forecast-item-card {
            flex: 0 0 auto; /* Prevent shrinking/growing */
            width: 140px; /* Fixed width for consistent items */
            background-color: #FFFFFF;
            border-radius: 16px;
            padding: 16px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.04);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            border: 1px solid #E2E8F0;
            scroll-snap-align: start;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        .forecast-item-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.07);
        }
        .forecast-item-card .forecast-icon {
            width: 70px;
            height: 70px;
            margin-bottom: 8px;
        }
        .forecast-item-card .forecast-time {
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 500;
            color: #475569;
            margin-bottom: 4px;
        }
        .forecast-item-card .forecast-temp {
            font-family: 'Poppins', sans-serif;
            font-size: 20px;
            font-weight: 600;
            color: #1E293B;
            margin-bottom: 4px;
        }
        .forecast-item-card .forecast-desc {
            font-size: 13px;
            color: #64748B;
            text-transform: capitalize;
            line-height: 1.3;
        }

        /* AI Assistant & Reminders - Clean sections */
        .section-separator {
            margin-top: 40px;
            padding-top: 32px;
            border-top: 1px solid #E2E8F0; /* Subtle horizontal line */
        }
        .info-box-display {
            background-color: #FFFFFF;
            border-radius: 20px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.05);
            padding: 24px;
            min-height: 120px;
            line-height: 1.7;
            font-family: 'Inter', sans-serif;
            font-size: 16px;
            color: #475569;
            text-align: left;
            border: 1px solid #E2E8F0;
        }
        .info-box-display p {
            color: #475569;
        }
        .reminder-list-display {
            background-color: #FFFFFF;
            border-radius: 20px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.05);
            padding: 24px;
            border: 1px solid #E2E8F0;
        }
        .reminder-item-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px dashed #E2E8F0;
            font-family: 'Inter', sans-serif;
            font-size: 15px;
            color: #475569;
        }
        .reminder-item-row:last-child {
            border-bottom: none;
        }
        .reminder-item-row .delete-btn {
            background-color: #EF4444;
            color: white;
            padding: 8px 16px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        .reminder-item-row .delete-btn:hover {
            background-color: #DC2626;
        }

        /* Utility classes */
        .flex-row-center {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .input-group {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
        }
        .input-group input, .input-group select {
            flex-grow: 1;
        }
        .loading-spinner {
            border: 5px solid rgba(0, 0, 0, 0.1);
            border-top: 5px solid #2DD4BF; /* Accent color */
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 32px auto;
        }
        .error-message-text {
            color: #EF4444;
            font-weight: 600;
            margin-top: 16px;
            text-align: center;
        }

        /* Notification Modal */
        .notification-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6); /* Darker overlay */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .notification-modal-content {
            background: linear-gradient(135deg, #2DD4BF, #5EEAD4); /* Accent gradient */
            color: white;
            padding: 48px;
            border-radius: 28px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            text-align: center;
            max-width: 500px;
            width: 90%;
            transform: scale(0.9);
            animation: popIn 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards;
        }
        .notification-modal-content h3 {
            font-family: 'Poppins', sans-serif;
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 20px;
        }
        .notification-modal-content p {
            font-family: 'Inter', sans-serif;
            font-size: 20px;
            line-height: 1.6;
            margin-bottom: 32px;
        }
        .notification-modal-content button {
            background-color: white;
            color: #2DD4BF; /* Accent color */
            padding: 16px 32px;
            border-radius: 16px;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        .notification-modal-content button:hover {
            background-color: #F8FAFC;
            color: #199988;
            box_shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        /* Animations */
        @keyframes fadeInScaleUp {
            from { opacity: 0; transform: scale(0.98); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes floatBlob {
            0% { transform: translate(0, 0) scale(1); }
            33% { transform: translate(15vw, 10vh) scale(1.02); } /* Use vw/vh for movement */
            66% { transform: translate(-10vw, -15vh) scale(0.98); } /* Use vw/vh for movement */
            100% { transform: translate(0, 0) scale(1); }
        }
        @keyframes slideInBottom {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        @keyframes fadeInBounce {
            0% { opacity: 0; transform: scale(0.5); }
            60% { transform: scale(1.1); }
            100% { opacity: 1; transform: scale(1); }
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        @keyframes popIn {
            0% { transform: scale(0.7); opacity: 0; }
            80% { transform: scale(1.05); opacity: 1; }
            100% { transform: scale(1); }
        }

        /* Responsive adjustments */
        @media (max-width: 768px) { /* Tablet and smaller */
            .main-container {
                padding: 24px;
                border-radius: 24px;
                gap: 24px;
            }
            .app-title {
                font-size: 32px;
                margin-bottom: 24px;
            }
            .section-heading {
                font-size: 24px;
                margin-bottom: 16px;
            }
            .input-group {
                flex-direction: column;
                gap: 12px;
            }
            .input-group input, .input-group select, .btn-elegant {
                width: 100%;
            }
            .current-weather-main {
                padding: 24px;
                border-radius: 24px;
            }
            .weather-icon-giant {
                width: 150px;
                height: 150px;
            }
            .temperature-super-large {
                font-size: 72px;
            }
            .city-country-large {
                font-size: 30px;
            }
            .description-large {
                font-size: 18px;
            }
            .highlights-grid {
                grid-template-columns: 1fr; /* Stack on mobile */
                gap: 16px;
            }
            .highlight-card-minimal {
                padding: 20px;
                border-radius: 16px;
            }
            .highlight-card-minimal .highlight-icon {
                font-size: 28px;
            }
            .highlight-card-minimal .highlight-value-bold {
                font-size: 24px;
            }
            .forecast-carousel {
                gap: 12px;
            }
            .forecast-item-card {
                width: 120px;
                padding: 12px;
                border-radius: 14px;
            }
            .forecast-item-card .forecast-icon {
                width: 60px;
                height: 60px;
            }
            .forecast-item-card .forecast-time, .forecast-item-card .forecast-temp {
                font-size: 13px;
            }
            .forecast-item-card .forecast-desc {
                font-size: 12px;
            }
            .info-box-display, .reminder-list-display {
                padding: 20px;
                font-size: 15px;
            }
            .reminder-item-row {
                font-size: 14px;
            }
            .reminder-item-row .delete-btn {
                padding: 6px 12px;
                font-size: 12px;
            }
            .notification-modal-content {
                padding: 32px;
                border-radius: 20px;
            }
            .notification-modal-content h3 {
                font-size: 28px;
            }
            .notification-modal-content p {
                font-size: 16px;
            }
            .notification-modal-content button {
                padding: 12px 24px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body class="font-poppins">
    <!-- Animated Background Blobs -->
    <div class="bg-blob-1"></div>
    <div class="bg-blob-2"></div>

    <div class="main-container">
        <h1 class="app-title">Zenith Weather</h1>

        <!-- Search Bar -->
        <div class="search-section">
            <div class="input-group">
                <input type="text" id="cityInput" placeholder="Enter city name...">
                <button id="searchButton" class="btn-elegant">Get Weather</button>
            </div>
            <div id="loadingSpinner" class="loading-spinner hidden"></div>
            <div id="errorMessage" class="error-message-text hidden"></div>
        </div>

        <!-- Weather Display Section -->
        <div id="weatherDisplay" class="hidden">
            <!-- Current Weather Main Display -->
            <div class="current-weather-main">
                <img id="weatherIcon" src="" alt="Weather Icon" class="weather-icon-giant">
                <div id="temperature" class="temperature-super-large"></div>
                <div id="cityName" class="city-country-large"></div>
                <div id="description" class="description-large"></div>
                <div id="currentTime" class="current-time-small"></div>
            </div>

            <!-- Highlights Grid -->
            <div class="highlights-grid">
                <div class="highlight-card-minimal uv-card">
                    <i class="fas fa-sun highlight-icon"></i>
                    <div class="highlight-label">UV Index</div>
                    <div id="uvIndex" class="highlight-value-bold">5</div>
                    <div class="highlight-status-text">Medium</div>
                    <div class="progress-bar-container">
                        <div class="progress-fill" style="--progress-width: 50%;"></div>
                        <div class="progress-indicator" style="--indicator-left: 50%;"></div>
                    </div>
                </div>

                <div class="highlight-card-minimal wind-card">
                    <i class="fas fa-wind highlight-icon"></i>
                    <div class="highlight-label">Wind Status</div>
                    <div id="windSpeedHighlight" class="highlight-value-bold"></div>
                    <div class="highlight-status-text"><span id="windDirStatus">WSW</span></div>
                    <div class="progress-bar-container">
                        <div class="progress-fill" style="--progress-width: 0%;"></div>
                        <div class="progress-indicator" style="--indicator-left: 0%;"></div>
                    </div>
                </div>

                <div class="highlight-card-minimal">
                    <i class="fas fa-cloud-sun highlight-icon"></i> <!-- Combined icon for sunrise/sunset -->
                    <div class="highlight-label">Sunrise & Sunset</div>
                    <div class="flex flex-col items-start w-full">
                        <div class="flex items-center text-lg font-medium text-gray-700 mt-2">
                            <i class="fas fa-arrow-up mr-2 text-green-500"></i> <span id="sunriseHighlight"></span>
                        </div>
                        <div class="flex items-center text-lg font-medium text-gray-700 mt-2">
                            <i class="fas fa-arrow-down mr-2 text-red-500"></i> <span id="sunsetHighlight"></span>
                        </div>
                    </div>
                </div>

                <div class="highlight-card-minimal humidity-card">
                    <i class="fas fa-tint highlight-icon"></i>
                    <div class="highlight-label">Humidity</div>
                    <div id="humidityHighlight" class="highlight-value-bold"></div>
                    <div class="highlight-status-text">Normal</div>
                    <div class="progress-bar-container">
                        <div class="progress-fill" style="--progress-width: 0%;"></div>
                        <div class="progress-indicator" style="--indicator-left: 0%;"></div>
                    </div>
                </div>

                <div class="highlight-card-minimal visibility-card">
                    <i class="fas fa-eye highlight-icon"></i>
                    <div class="highlight-label">Visibility</div>
                    <div id="visibility" class="highlight-value-bold">5.2 km</div> <!-- Placeholder -->
                    <div class="highlight-status-text">Average</div>
                    <div class="progress-bar-container">
                        <div class="progress-fill" style="--progress-width: 0%;"></div>
                        <div class="progress-indicator" style="--indicator-left: 0%;"></div>
                    </div>
                </div>

                <div class="highlight-card-minimal air-quality-card">
                    <i class="fas fa-mask highlight-icon"></i>
                    <div class="highlight-label">Air Quality</div>
                    <div id="airQuality" class="highlight-value-bold">105</div> <!-- Placeholder -->
                    <div class="highlight-status-text">Unhealthy</div>
                    <div class="progress-bar-container">
                        <div class="progress-fill" style="--progress-width: 0%;"></div>
                        <div class="progress-indicator" style="--indicator-left: 0%;"></div>
                    </div>
                </div>
            </div>

            <!-- Weekly Forecast Section -->
            <div class="forecast-carousel-wrapper section-separator">
                <h2 class="section-heading">Daily Forecast</h2>
                <div id="forecastDisplay" class="forecast-carousel">
                    <p class="w-full text-center text-gray-500">No forecast data available.</p>
                    <!-- Forecast cards will be injected here by JavaScript -->
                </div>
            </div>
        </div>

        <!-- AI Assistant Section -->
        <div class="ai-section section-separator">
            <h2 class="section-heading">AI Weather Assistant</h2>
            <div class="input-group">
                <input type="text" id="aiQuestionInput" placeholder="Ask about the weather...">
                <button id="askAiButton" class="btn-elegant">Ask AI</button>
            </div>
            <div id="aiResponseSpinner" class="loading-spinner hidden"></div>
            <div id="aiResponse" class="info-box-display">
                <p>I can tell you more about the weather conditions here. Try asking "What's the temperature at 7 PM?"</p>
            </div>
            <div id="aiErrorMessage" class="error-message-text hidden"></div>
        </div>

        <!-- Weather Reminder Section -->
        <div class="reminder-section section-separator">
            <h2 class="section-heading">Set Weather Reminder</h2>
            <div class="input-group">
                <input type="number" id="reminderTempInput" placeholder="Temperature (째C)">
                <select id="reminderCondition">
                    <option value="above">Above</option>
                    <option value="below">Below</option>
                </select>
                <button id="setReminderButton" class="btn-elegant">Set Reminder</button>
            </div>
            <div id="reminderMessage" class="error-message-text hidden"></div>
            <h3 class="text-xl font-semibold mb-4 text-gray-800 font-poppins text-left">Active Reminders:</h3>
            <div id="reminderList" class="reminder-list-display">
                <p class="text-gray-600">No reminders set.</p>
            </div>
        </div>

    </div>

    <!-- Notification Modal HTML -->
    <div id="notificationModalOverlay" class="notification-modal-overlay hidden">
        <div class="notification-modal-content">
            <h3 id="notificationTitle">Weather Alert!</h3>
            <p id="notificationMessage"></p>
            <button id="closeNotificationButton">Got It!</button>
        </div>
    </div>


    <script>
        const cityInput = document.getElementById('cityInput');
        const searchButton = document.getElementById('searchButton');
        const weatherDisplay = document.getElementById('weatherDisplay');
        const errorMessage = document.getElementById('errorMessage');
        const loadingSpinner = document.getElementById('loadingSpinner');

        const weatherIcon = document.getElementById('weatherIcon');
        const temperature = document.getElementById('temperature');
        const currentTimeElement = document.getElementById('currentTime');
        const cityName = document.getElementById('cityName');
        const description = document.getElementById('description');

        // Highlights elements (placeholders for now, as backend doesn't provide all)
        const uvIndex = document.getElementById('uvIndex');
        const windSpeedHighlight = document.getElementById('windSpeedHighlight');
        const windDirStatus = document.getElementById('windDirStatus'); // Still placeholder
        const humidityHighlight = document.getElementById('humidityHighlight');
        const visibility = document.getElementById('visibility');
        const airQuality = document.getElementById('airQuality');
        const sunriseHighlight = document.getElementById('sunriseHighlight');
        const sunsetHighlight = document.getElementById('sunsetHighlight');

        // Forecast elements
        const forecastDisplay = document.getElementById('forecastDisplay');

        // AI Assistant elements
        const aiQuestionInput = document.getElementById('aiQuestionInput');
        const askAiButton = document.getElementById('askAiButton');
        const aiResponse = document.getElementById('aiResponse');
        const aiResponseSpinner = document.getElementById('aiResponseSpinner');
        const aiErrorMessage = document.getElementById('aiErrorMessage');

        // Reminder elements
        const reminderTempInput = document.getElementById('reminderTempInput');
        const reminderCondition = document.getElementById('reminderCondition');
        const setReminderButton = document.getElementById('setReminderButton');
        const reminderMessage = document.getElementById('reminderMessage');
        const reminderList = document.getElementById('reminderList');

        // Notification Modal elements
        const notificationModalOverlay = document.getElementById('notificationModalOverlay');
        const notificationTitle = document.getElementById('notificationTitle');
        const notificationMessage = document.getElementById('notificationMessage');
        const closeNotificationButton = document.getElementById('closeNotificationButton');

        let currentWeatherData = null; // Store fetched weather data for AI context and reminders
        let activeReminders = []; // Array to store active reminders
        let currentUnit = 'celsius'; // Default unit, not directly exposed in this UI but kept for consistency

        // Functions to show/hide elements
        function show(element) {
            element.classList.remove('hidden');
        }

        function hide(element) {
            element.classList.add('hidden');
        }

        // Function to display error messages
        function showError(element, message) {
            element.textContent = message;
            show(element);
        }

        // Function to update the current time
        function updateCurrentTime(timezoneOffsetSeconds = 0) {
            const now = new Date();
            // Get UTC time in milliseconds
            const utc = now.getTime() + (now.getTimezoneOffset() * 60 * 1000);
            // Convert to local time of the city
            const cityTime = new Date(utc + (timezoneOffsetSeconds * 1000));

            const options = {
                weekday: 'long',
                hour: '2-digit',
                minute: '2-digit',
                hour12: false // Use 24-hour format for consistency with Dribbble image
            };
            currentTimeElement.textContent = `${cityTime.toLocaleString('en-US', options)}`;
        }

        // Helper for converting Celsius to Fahrenheit (kept for potential future unit toggle)
        function toFahrenheit(celsius) {
            return (celsius * 9 / 5) + 32;
        }

        // Function to update temperatures based on unit (currently fixed to Celsius in UI)
        function updateTemperatures(data) {
            if (!data) return;

            const tempC = Math.round(data.temperature);
            const feelsLikeC = Math.round(data.feels_like);
            // const tempF = Math.round(toFahrenheit(data.temperature)); // Keep for reference
            // const feelsLikeF = Math.round(toFahrenheit(data.feels_like)); // Keep for reference

            temperature.textContent = `${tempC}째C`;
            // For now, feelsLike is directly updated in fetchWeather, but could be dynamic
        }

        async function fetchWeather() {
            const city = cityInput.value.trim();
            if (!city) {
                showError(errorMessage, "Please enter a city name.");
                return;
            }

            hide(weatherDisplay);
            hide(errorMessage);
            show(loadingSpinner);
            aiResponse.innerHTML = '<p class="text-gray-600">Thinking...</p>'; // Show thinking message
            hide(aiErrorMessage);


            try {
                const response = await fetch(`${window.location.origin}/weather?city=${encodeURIComponent(city)}`);

                if (!response.ok) {
                    const errorJson = await response.json().catch(() => ({error: 'Unknown server error.'}));
                    showError(errorMessage, errorJson.error || `Server error (${response.status}): Could not fetch weather data.`);
                    currentWeatherData = null;
                    return;
                }

                const data = await response.json();
                currentWeatherData = data;

                // Update Main Current Weather Display
                weatherIcon.src = data.icon;
                updateTemperatures(data);
                cityName.textContent = `${data.city}, ${data.country}`;
                description.textContent = data.description;
                updateCurrentTime(data.timezone_offset);


                // Update Highlights
                uvIndex.textContent = '5'; // Placeholder
                setProgressBarValue('uv-card', 5, 10); // UV Index max 10

                windSpeedHighlight.textContent = `${data.wind_speed} m/s`;
                windDirStatus.textContent = 'WSW'; // Placeholder direction
                setProgressBarValue('wind-card', data.wind_speed, 20); // Assuming max wind speed for slider is 20 m/s

                humidityHighlight.textContent = `${data.humidity}%`;
                setProgressBarValue('humidity-card', data.humidity, 100);

                visibility.textContent = '5.2 km'; // Placeholder
                setProgressBarValue('visibility-card', 52, 100); // Representing 5.2km out of say 10km for progress

                airQuality.textContent = '105'; // Placeholder
                setProgressBarValue('air-quality-card', 70, 100); // Placeholder percentage

                sunriseHighlight.textContent = data.sunrise;
                sunsetHighlight.textContent = data.sunset;

                show(weatherDisplay);
                checkReminders(data);
                renderForecast(data.forecast); // This will populate the daily forecast carousel


            } catch (error) {
                console.error("Error fetching weather:", error);
                showError(errorMessage, "Could not retrieve weather. Please try again.");
                currentWeatherData = null;
            } finally {
                hide(loadingSpinner);
            }
        }

        // Function to set progress bar visual properties
        function setProgressBarValue(cardClass, currentValue, maxValue) {
            const percentage = (currentValue / maxValue) * 100;
            const card = document.querySelector(`.${cardClass}`);
            if (card) {
                const fill = card.querySelector('.progress-fill');
                const indicator = card.querySelector('.progress-indicator');
                if (fill) fill.style.setProperty('--progress-width', `${percentage}%`);
                // Calculate indicator position for arc (UV) and straight (others)
                if (cardClass.includes('uv-card')) {
                    // UV index has custom rotation: 0= -90deg, 10= +90deg. Linear map.
                    const rotation = (currentValue / maxValue) * 180 - 90; // Map 0-10 to -90 to 90 degrees
                    if (fill) fill.style.setProperty('--uv-rotation', `${rotation}deg`);
                    if (indicator) indicator.style.setProperty('--uv-rotation', `${rotation}deg`);
                } else {
                    if (indicator) indicator.style.setProperty('--indicator-left', `${percentage}%`);
                }
            }
        }


        function renderForecast(forecastData) {
            forecastDisplay.innerHTML = ''; // Clear previous forecast
            if (forecastData && forecastData.length > 0) {
                // Since backend gives 24h, we map this to 7 days for visual consistency with previous request.
                // In a real app, you'd fetch a dedicated 7-day forecast API.
                const daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
                const now = new Date();

                for (let i = 0; i < 7; i++) {
                    const day = new Date(now);
                    day.setDate(now.getDate() + i); // Increment date for each forecast day

                    const dayName = daysOfWeek[day.getDay()];
                    let iconSrc = 'http://openweathermap.org/img/wn/01d@2x.png'; // Default sunny icon
                    let tempVal = 20 + Math.random() * 5; // Dummy temp if no real data
                    let descVal = 'Clear'; // Dummy description

                    // Attempt to find a relevant forecast entry for the current day `day`
                    // We'll take the closest entry to midday for simplicity for now
                    const relevantForecast = forecastData.find(item => {
                        const itemDate = new Date(item.timestamp * 1000);
                        return itemDate.getDate() === day.getDate() &&
                               itemDate.getMonth() === day.getMonth() &&
                               itemDate.getFullYear() === day.getFullYear() &&
                               itemDate.getHours() >= 12 && itemDate.getHours() < 18; // Midday to evening
                    }) || forecastData.find(item => { // Fallback to any for the day
                        const itemDate = new Date(item.timestamp * 1000);
                        return itemDate.getDate() === day.getDate() &&
                               itemDate.getMonth() === day.getMonth() &&
                               itemDate.getFullYear() === day.getFullYear();
                    }) || null;

                    if (relevantForecast) {
                        iconSrc = relevantForecast.icon;
                        tempVal = relevantForecast.temperature;
                        descVal = relevantForecast.description;
                    }

                    const forecastItem = document.createElement('div');
                    forecastItem.classList.add('forecast-item-card');
                    forecastItem.innerHTML = `
                        <div class="forecast-time">${dayName}</div>
                        <img src="${iconSrc}" alt="${descVal}" class="forecast-icon">
                        <div class="forecast-temp">${Math.round(tempVal)}째C</div>
                        <div class="forecast-desc">${descVal}</div>
                    `;
                    forecastDisplay.appendChild(forecastItem);
                }
            } else {
                forecastDisplay.innerHTML = '<p class="w-full text-center text-gray-500">No detailed forecast available.</p>';
            }
        }


        async function askAI() {
            const question = aiQuestionInput.value.trim();
            if (!question) {
                showError(aiErrorMessage, "Please enter a question.");
                return;
            }

            if (!currentWeatherData) {
                showError(aiErrorMessage, "Please search for a city's weather first.");
                return;
            }

            hide(aiErrorMessage);
            aiResponse.innerHTML = '<p class="text-gray-600">Thinking...</p>'; // Show thinking message
            show(aiResponseSpinner);

            try {
                // Corrected: promptPayload is now properly defined here
                const promptPayload = {
                    prompt: question,
                    current_weather: currentWeatherData,
                    forecast: currentWeatherData.forecast
                };

                const response = await fetch(`${window.location.origin}/ask-ai`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(promptPayload)
                });

                if (!response.ok) {
                    const errorJson = await response.json().catch(() => ({error: 'Unknown server error.'}));
                    showError(aiErrorMessage, errorJson.error || `Server error (${response.status}): Could not get AI response.`);
                    aiResponse.innerHTML = '<p class="text-red-500">Failed to get AI response.</p>';
                    return;
                }

                const data = await response.json();
                aiResponse.textContent = data.response;
            } catch (error) {
                console.error("Error asking AI:", error);
                showError(aiErrorMessage, "Could not get AI response. Please try again.");
                aiResponse.innerHTML = '<p class="text-red-500">Failed to get AI response.</p>';
            } finally {
                hide(aiResponseSpinner);
            }
        }

        // --- Reminder Functions (unchanged from previous version, adapted classes) ---
        function loadReminders() {
            const storedReminders = localStorage.getItem('weatherReminders');
            if (storedReminders) {
                activeReminders = JSON.parse(storedReminders);
            }
            renderReminders();
        }

        function saveReminders() {
            localStorage.setItem('weatherReminders', JSON.stringify(activeReminders));
        }

        function renderReminders() {
            reminderList.innerHTML = '';
            if (activeReminders.length === 0) {
                reminderList.innerHTML = '<p class="text-gray-600">No reminders set.</p>';
                return;
            }

            activeReminders.forEach((reminder, index) => {
                const reminderItem = document.createElement('div');
                reminderItem.classList.add('reminder-item-row');
                reminderItem.innerHTML = `
                    <span class="text-gray-700 font-medium">Remind when temp is ${reminder.condition} ${reminder.threshold}째C in ${reminder.city}</span>
                    <button class="delete-btn" data-index="${index}">Delete</button>
                `;
                reminderList.appendChild(reminderItem);
            });

            reminderList.querySelectorAll('.delete-btn').forEach(button => {
                button.addEventListener('click', (event) => {
                    const indexToDelete = parseInt(event.target.dataset.index);
                    activeReminders.splice(indexToDelete, 1);
                    saveReminders();
                    renderReminders();
                });
            });
        }

        function setReminder() {
            const threshold = parseFloat(reminderTempInput.value);
            const condition = reminderCondition.value;
            const city = cityInput.value.trim();

            hide(reminderMessage);

            if (!city) {
                showError(reminderMessage, "Please search for a city first to set a reminder.");
                return;
            }
            if (isNaN(threshold)) {
                showError(reminderMessage, "Please enter a valid temperature for the reminder.");
                return;
            }

            const newReminder = {
                city: city,
                threshold: threshold,
                condition: condition,
                id: Date.now()
            };

            activeReminders.push(newReminder);
            saveReminders();
            renderReminders();
            reminderTempInput.value = '';
            const successMessage = document.createElement('p');
            successMessage.textContent = "Reminder set successfully!";
            successMessage.classList.add('text-green-600', 'font-semibold', 'text-center', 'mt-4');
            reminderMessage.innerHTML = '';
            reminderMessage.appendChild(successMessage);
            show(reminderMessage);
            setTimeout(() => hide(reminderMessage), 3000);
        }

        function checkReminders(currentWeather) {
            if (!currentWeather) return;

            const temp = currentWeather.temperature;
            const city = currentWeather.city;
            const country = currentWeather.country;
            const triggeredReminders = [];

            activeReminders = activeReminders.filter(reminder => {
                if (reminder.city.toLowerCase() === city.toLowerCase()) {
                    let isTriggered = false;
                    if (reminder.condition === 'above' && temp >= reminder.threshold) {
                        isTriggered = true;
                    } else if (reminder.condition === 'below' && temp <= reminder.threshold) {
                        isTriggered = true;
                    }

                    if (isTriggered) {
                        triggeredReminders.push({
                            city: city,
                            temp: Math.round(temp),
                            threshold: reminder.threshold,
                            condition: reminder.condition,
                            country: country
                        });
                        return false;
                    }
                }
                return true;
            });

            saveReminders();
            renderReminders();

            if (triggeredReminders.length > 0) {
                showNotification(triggeredReminders);
            }
        }

        function showNotification(triggeredReminders) {
            let message = "The weather conditions have been met for your reminder(s):\n\n";
            triggeredReminders.forEach(tr => {
                message += ` Temperature in ${tr.city}, ${tr.country} is ${tr.temp}째C, which is ${tr.condition} your set threshold of ${tr.threshold}째C.\n`;
            });
            notificationMessage.textContent = message;
            show(notificationModalOverlay);
        }

        // Event Listeners
        searchButton.addEventListener('click', fetchWeather);
        cityInput.addEventListener('keypress', (event) => {
            if (event.key === 'Enter') {
                fetchWeather();
            }
        });

        askAiButton.addEventListener('click', askAI);
        aiQuestionInput.addEventListener('keypress', (event) => {
            if (event.key === 'Enter') {
                askAI();
            }
        });

        setReminderButton.addEventListener('click', setReminder);

        closeNotificationButton.addEventListener('click', () => {
            hide(notificationModalOverlay);
        });

        // Initial load
        cityInput.value = "Solapur";
        fetchWeather();
        loadReminders();

        // Periodically refresh weather data for reminders (if city input is not empty)
        setInterval(() => {
            if (cityInput.value.trim() && activeReminders.length > 0) {
                fetchWeather();
            }
        }, 300000); // Every 5 minutes (300,000 milliseconds)
    </script>
</body>
</html>
